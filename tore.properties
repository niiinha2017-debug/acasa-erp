warning: in the working copy of 'frontend/android/.gitignore', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'frontend/android/app/build.gradle', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/frontend/android/.gitignore b/frontend/android/.gitignore[m
[1mindex 48354a3..deffe44 100644[m
[1m--- a/frontend/android/.gitignore[m
[1m+++ b/frontend/android/.gitignore[m
[36m@@ -1,101 +1,9 @@[m
[31m-# Using Android gitignore template: https://github.com/github/gitignore/blob/HEAD/Android.gitignore[m
[31m-[m
[31m-# Built application files[m
[31m-*.apk[m
[31m-*.aar[m
[31m-*.ap_[m
[31m-*.aab[m
[31m-[m
[31m-# Files for the ART/Dalvik VM[m
[31m-*.dex[m
[31m-[m
[31m-# Java class files[m
[31m-*.class[m
[31m-[m
[31m-# Generated files[m
[31m-bin/[m
[31m-gen/[m
[31m-out/[m
[31m-#  Uncomment the following line in case you need and you don't have the release build type files in your app[m
[31m-# release/[m
[31m-[m
[31m-# Gradle files[m
[31m-.gradle/[m
[31m-build/[m
[31m-[m
[31m-# Local configuration file (sdk path, etc)[m
[31m-local.properties[m
[31m-[m
[31m-# Proguard folder generated by Eclipse[m
[31m-proguard/[m
[31m-[m
[31m-# Log Files[m
[31m-*.log[m
[31m-[m
[31m-# Android Studio Navigation editor temp files[m
[31m-.navigation/[m
[31m-[m
[31m-# Android Studio captures folder[m
[31m-captures/[m
[31m-[m
[31m-# IntelliJ[m
[31m-*.iml[m
[31m-.idea/workspace.xml[m
[31m-.idea/tasks.xml[m
[31m-.idea/gradle.xml[m
[31m-.idea/assetWizardSettings.xml[m
[31m-.idea/dictionaries[m
[31m-.idea/libraries[m
[31m-# Android Studio 3 in .gitignore file.[m
[31m-.idea/caches[m
[31m-.idea/modules.xml[m
[31m-# Comment next line if keeping position of elements in Navigation Editor is relevant for you[m
[31m-.idea/navEditor.xml[m
[31m-[m
[31m-# Keystore files[m
[31m-# Uncomment the following lines if you do not want to check your keystore files in.[m
[31m-#*.jks[m
[31m-#*.keystore[m
[31m-[m
[31m-# External native build folder generated in Android Studio 2.2 and later[m
[31m-.externalNativeBuild[m
[31m-.cxx/[m
[31m-[m
[31m-# Google Services (e.g. APIs or Firebase)[m
[31m-# google-services.json[m
[31m-[m
[31m-# Freeline[m
[31m-freeline.py[m
[31m-freeline/[m
[31m-freeline_project_description.json[m
[31m-[m
[31m-# fastlane[m
[31m-fastlane/report.xml[m
[31m-fastlane/Preview.html[m
[31m-fastlane/screenshots[m
[31m-fastlane/test_output[m
[31m-fastlane/readme.md[m
[31m-[m
[31m-# Version control[m
[31m-vcs.xml[m
[31m-[m
[31m-# lint[m
[31m-lint/intermediates/[m
[31m-lint/generated/[m
[31m-lint/outputs/[m
[31m-lint/tmp/[m
[31m-# lint/reports/[m
[31m-[m
[31m-# Android Profiling[m
[31m-*.hprof[m
[31m-[m
[31m-# Cordova plugins for Capacitor[m
[31m-capacitor-cordova-android-plugins[m
[31m-[m
[31m-# Copied web assets[m
[31m-app/src/main/assets/public[m
[31m-[m
[31m-# Generated Config files[m
[31m-app/src/main/assets/capacitor.config.json[m
[31m-app/src/main/assets/capacitor.plugins.json[m
[31m-app/src/main/res/xml/config.xml[m
[32m+[m[32m# Android signing (NUNCA versionar)[m
[32m+[m[32mkeystore.properties[m
[32m+[m[32m*.jks[m
[32m+[m[32m*.keystore[m
[32m+[m
[32m+[m[32m# Android signing (NUNCA versionar)[m
[32m+[m[32mkeystore.properties[m
[32m+[m[32m*.jks[m
[32m+[m[32m*.keystore[m
[1mdiff --git a/frontend/android/app/build.gradle b/frontend/android/app/build.gradle[m
[1mindex 64da88f..8162d1f 100644[m
[1m--- a/frontend/android/app/build.gradle[m
[1m+++ b/frontend/android/app/build.gradle[m
[36m@@ -1,5 +1,15 @@[m
 apply plugin: 'com.android.application'[m
 [m
[32m+[m[32mimport java.util.Properties[m
[32m+[m[32mimport java.io.FileInputStream[m
[32m+[m
[32m+[m[32m// ---- KEYS (release signing) ----[m
[32m+[m[32mdef keystorePropertiesFile = rootProject.file("keystore.properties")[m
[32m+[m[32mdef keystoreProperties = new Properties()[m
[32m+[m[32mif (keystorePropertiesFile.exists()) {[m
[32m+[m[32m    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))[m
[32m+[m[32m}[m
[32m+[m
 android {[m
     namespace "com.acasa.erp"[m
     compileSdk rootProject.ext.compileSdkVersion[m
[36m@@ -24,8 +34,27 @@[m [mandroid {[m
         targetCompatibility JavaVersion.VERSION_17[m
     }[m
 [m
[32m+[m[32m    signingConfigs {[m
[32m+[m[32m        release {[m
[32m+[m[32m            // S√≥ configura se existir o arquivo (n√£o quebra o build do dev/CI)[m
[32m+[m[32m            if (keystorePropertiesFile.exists()) {[m
[32m+[m[32m                storeFile file(keystoreProperties['storeFile'])[m
[32m+[m[32m                storePassword keystoreProperties['storePassword'][m
[32m+[m[32m                keyAlias keystoreProperties['keyAlias'][m
[32m+[m[32m                keyPassword keystoreProperties['keyPassword'][m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
     buildTypes {[m
[32m+[m[32m        debug {[m
[32m+[m[32m            // debug continua assinando com debug padr√£o (normal)[m
[32m+[m[32m        }[m
[32m+[m
         release {[m
[32m+[m[32m            // ‚úÖ Assina o release (para de sair -unsigned.apk)[m
[32m+[m[32m            signingConfig signingConfigs.release[m
[32m+[m
             minifyEnabled false[m
             proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'[m
         }[m
