{"version":3,"file":"_id_-BiFzUZ3B.js","sources":["../../../backend/shared/constantes/pipeline-plano-corte.ts","../../src/pages/plano-corte/[id].vue"],"sourcesContent":["// src/constantes/pipeline-plano-corte.js\r\n\r\nexport const PIPELINE_PLANO_CORTE = [\r\n  // =========================\r\n  // ABERTURA\r\n  // =========================\r\n  {\r\n    key: 'EM_ABERTO',\r\n    label: 'Em aberto',\r\n    fase: 'ABERTURA',\r\n    ordem: 1,\r\n    temTela: true, // tela de cadastro/edição do plano\r\n  },\r\n\r\n  // =========================\r\n  // PRODUÇÃO\r\n  // =========================\r\n  {\r\n    key: 'EM_PRODUCAO',\r\n    label: 'Em produção',\r\n    fase: 'PRODUCAO',\r\n    ordem: 2,\r\n    temTela: false,\r\n  },\r\n  {\r\n    key: 'FINALIZADO',\r\n    label: 'Finalizado',\r\n    fase: 'PRODUCAO',\r\n    ordem: 3,\r\n    temTela: false,\r\n  },\r\n\r\n  // =========================\r\n  // FINANCEIRO\r\n  // =========================\r\n  {\r\n    key: 'COMPENSADO',\r\n    label: 'Compensado',\r\n    fase: 'FINANCEIRO',\r\n    ordem: 4,\r\n    temTela: false,\r\n  },\r\n]\r\n","<template>\r\n  <div class=\"w-full max-w-[1400px] mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n    \r\n    <Card :shadow=\"true\" class=\"overflow-visible !rounded-[3rem] border-none shadow-[0_40px_80px_-15px_rgba(0,0,0,0.2)]\">\r\n      <header class=\"flex flex-col md:flex-row items-center justify-between gap-6 p-10 border-b border-slate-100 bg-slate-50/50\">\r\n        <div class=\"flex items-center gap-6\">\r\n          <div class=\"w-16 h-16 rounded-[1.5rem] bg-slate-900 flex items-center justify-center text-white shadow-2xl shadow-slate-900/20 rotate-3 hover:rotate-0 transition-transform duration-500\">\r\n            <i class=\"pi pi-box text-3xl\"></i>\r\n          </div>\r\n          <div>\r\n            <h2 class=\"text-2xl font-black tracking-tighter text-slate-800 uppercase italic leading-none\">\r\n              {{ isEdit ? `Plano de Corte #${planoId}` : 'Novo Plano de Corte' }}\r\n            </h2>\r\n            <div class=\"flex items-center gap-2 mt-2\">\r\n              <span class=\"w-2 h-2 rounded-full bg-emerald-500 animate-pulse\"></span>\r\n              <p class=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]\">Ordem de Industrialização / Venda</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button \r\n          @click=\"router.back()\" \r\n          class=\"flex items-center gap-3 px-6 h-12 rounded-2xl bg-white border border-slate-200 text-slate-500 hover:bg-slate-900 hover:text-white transition-all shadow-sm group\"\r\n        >\r\n          <i class=\"pi pi-arrow-left text-[10px] group-hover:-translate-x-1 transition-transform\"></i>\r\n          <span class=\"text-[10px] font-black uppercase tracking-widest\">Painel Geral</span>\r\n        </button>\r\n      </header>\r\n\r\n      <div class=\"p-10\">\r\n        <template v-if=\"!loading\">\r\n          <section class=\"grid grid-cols-12 gap-8 mb-12\">\r\n            <div class=\"col-span-12 md:col-span-6\">\r\n<SearchInput\r\n  v-model=\"fornecedorSelecionado\"\r\n  mode=\"select\"\r\n  label=\"Fornecedor Destinatário\"\r\n  :options=\"fornecedorOptions\"\r\n  required\r\n  @update:modelValue=\"onSelecionarFornecedor\"\r\n/>\r\n\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-3\">\r\n              <Input v-model=\"dataVenda\" label=\"Data do Pedido\" type=\"date\" required />\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-3\">\r\n<SearchInput\r\n  v-model=\"statusPlano\"\r\n  mode=\"select\"\r\n  label=\"Status da Venda\"\r\n  :options=\"statusPlanoOptions\"\r\n  :readonly=\"isEdit\"\r\n/>\r\n\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"bg-slate-50 rounded-[2.5rem] p-8 border border-slate-100 shadow-inner mb-10\">\r\n            <div class=\"flex items-center justify-between mb-8\">\r\n              <h3 class=\"text-[11px] font-black uppercase tracking-[0.25em] text-slate-500\">Adicionar Insumos ao Plano</h3>\r\n<button\r\n  v-if=\"can(permSalvarPlano())\"\r\n  type=\"button\"\r\n  @click=\"abrirModalProduto()\"\r\n  class=\"text-[10px] font-black uppercase text-emerald-600 hover:tracking-widest transition-all italic\"\r\n>\r\n  + Cadastrar Novo Produto\r\n</button>\r\n\r\n            </div>\r\n\r\n            <div class=\"grid grid-cols-12 gap-6 items-end\">\r\n              <div class=\"col-span-12 md:col-span-5\">\r\n<SearchInput\r\n  v-model=\"itemNovo.item_id\"\r\n  mode=\"select\"\r\n  label=\"Produto / Material\"\r\n  :options=\"produtoOptions\"\r\n  @update:modelValue=\"onSelecionarProdutoNovo\"\r\n/>\r\n\r\n              </div>\r\n              <div class=\"col-span-6 md:col-span-2\">\r\n                <Input v-model=\"itemNovo.quantidade\" label=\"Quantidade\" placeholder=\"0\" type=\"number\" />\r\n              </div>\r\n              <div class=\"col-span-6 md:col-span-2\">\r\n                <Input v-model=\"itemNovo.valorUnitarioMask\" label=\"Vl. Unitário (Custo)\" />\r\n              </div>\r\n              \r\n              <div class=\"col-span-12 md:col-span-3\">\r\n                <div class=\"flex items-center gap-3\">\r\n                  <div class=\"flex-1 px-4 h-14 rounded-2xl bg-white border border-slate-200 flex flex-col justify-center\">\r\n                    <span class=\"text-[8px] font-black text-slate-400 uppercase tracking-widest\">Total Item</span>\r\n                    <span class=\"text-sm font-black text-emerald-600\">{{ itemNovoTotalExibicao }}</span>\r\n                  </div>\r\n<Button\r\n  v-if=\"can(permSalvarPlano())\"\r\n  variant=\"primary\"\r\n  class=\"!h-14 !w-14 !rounded-2xl shadow-xl shadow-slate-900/20\"\r\n  :disabled=\"!podeAdicionarItem\"\r\n  @click=\"registrarItemNovo()\"\r\n>\r\n  <i class=\"pi pi-plus text-lg\"></i>\r\n</Button>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <Table\r\n            :columns=\"columnsItens\"\r\n            :rows=\"itens\"\r\n            class=\"premium-table\"\r\n            empty-text=\"Nenhum item adicionado.\"\r\n          >\r\n            <template #cell-produto=\"{ row }\">\r\n              <div class=\"flex flex-col\">\r\n                <span class=\"font-black text-slate-700 uppercase italic tracking-tighter\">{{ row.item?.nome_produto }}</span>\r\n                <span class=\"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5\">\r\n                   {{ row.item?.cor || 'PADRÃO' }} • {{ row.item?.marca || 'MARCA NÃO INFO.' }}\r\n                </span>\r\n              </div>\r\n            </template>\r\n\r\n            <template #cell-valor_unitario=\"{ row }\">\r\n              <span class=\"font-bold text-slate-500 text-xs\">{{ maskMoneyBR(row.valor_unitario || 0) }}</span>\r\n            </template>\r\n\r\n            <template #cell-valor_total=\"{ row }\">\r\n              <span class=\"font-black text-slate-800\">{{ maskMoneyBR(row.valor_total || 0) }}</span>\r\n            </template>\r\n\r\n            <template #cell-acoes=\"{ index }\">\r\n              <div class=\"flex justify-end\">\r\n<button\r\n  v-if=\"can(permSalvarPlano())\"\r\n  @click=\"confirmarRemoverItemPlano(index)\"\r\n  class=\"w-10 h-10 rounded-xl text-slate-300 hover:bg-rose-50 hover:text-rose-500 transition-all flex items-center justify-center\"\r\n>\r\n  <i class=\"pi pi-trash text-xs\"></i>\r\n</button>\r\n\r\n              </div>\r\n            </template>\r\n          </Table>\r\n\r\n          <div class=\"flex justify-end mt-12\">\r\n            <div class=\"relative group\">\r\n              <div class=\"absolute -inset-1 bg-gradient-to-r from-emerald-500 to-slate-900 rounded-[2.5rem] blur opacity-10 group-hover:opacity-20 transition duration-1000\"></div>\r\n              <div class=\"relative flex flex-col items-end p-8 rounded-[2rem] bg-white border border-slate-100 shadow-xl min-w-[300px]\">\r\n                <span class=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]\">Total da Industrialização</span>\r\n                <span class=\"text-4xl font-black text-slate-900 tracking-tighter mt-2 italic\">\r\n                  {{ maskMoneyBR(totalCalculado) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <div v-else class=\"py-40 flex flex-col items-center justify-center gap-6\">\r\n          <div class=\"w-16 h-16 border-4 border-slate-100 border-t-slate-900 rounded-full animate-spin\"></div>\r\n          <p class=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.4em] animate-pulse\">Sincronizando Dados...</p>\r\n        </div>\r\n      </div>\r\n\r\n      <footer class=\"flex items-center justify-between p-10 border-t border-slate-100 bg-slate-50/50\">\r\n<Button\r\n  v-if=\"isEdit && can('plano_corte.excluir')\"\r\n  variant=\"danger\"\r\n  @click=\"confirmarExcluirPlano\"\r\n  class=\"!rounded-2xl !px-8 !h-14 font-black text-[10px] uppercase tracking-widest\"\r\n>\r\n  Excluir Plano\r\n</Button>\r\n\r\n        <div v-else></div>\r\n\r\n        <div class=\"flex items-center gap-6\">\r\n<Button\r\n  v-if=\"isEdit && can('plano_corte.enviar_producao')\"\r\n  type=\"button\"\r\n  variant=\"secondary\"\r\n  :loading=\"encaminhando\"\r\n  :disabled=\"statusPlano === 'EM_PRODUCAO'\"\r\n  @click=\"encaminharParaProducao\"\r\n>\r\n  Enviar Produção\r\n</Button>\r\n\r\n\r\n\r\n<Button\r\n  v-if=\"can(permSalvarPlano())\"\r\n  variant=\"primary\"\r\n  :loading=\"salvando\"\r\n  @click=\"salvar\"\r\n  class=\"!rounded-[1.5rem] !px-12 !h-14 shadow-[0_20px_40px_-10px_rgba(0,0,0,0.2)] font-black text-[10px] uppercase tracking-widest bg-slate-900 hover:bg-black\"\r\n>\r\n  <i class=\"pi pi-check-circle mr-3\"></i>\r\n  {{ isEdit ? 'Atualizar Plano' : 'Confirmar Venda' }}\r\n</Button>\r\n\r\n        </div>\r\n      </footer>\r\n    </Card>\r\n\r\n    <Teleport to=\"body\">\r\n  <Transition name=\"fade\">\r\n    <div\r\n      v-if=\"modalProduto.aberto\"\r\n      class=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm\"\r\n      @click.self=\"fecharModalProduto()\"\r\n    >\r\n      <div class=\"w-full max-w-2xl max-h-[85vh] bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col\">\r\n        <!-- Header (PADRÃO) -->\r\n        <header class=\"flex items-center justify-between px-6 py-5 border-b border-slate-100 bg-slate-50/50\">\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"w-11 h-11 rounded-[1.1rem] bg-slate-900 flex items-center justify-center text-white shadow-lg\">\r\n              <i class=\"pi pi-box text-lg\"></i>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 class=\"text-lg font-black text-slate-800 tracking-tight uppercase leading-none\">\r\n                Novo Insumo\r\n              </h3>\r\n              <div class=\"flex items-center gap-2 mt-1\">\r\n                <span class=\"w-2 h-2 rounded-full bg-emerald-500\"></span>\r\n                <p class=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\r\n                  Cadastro rápido para este fornecedor\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            class=\"w-10 h-10 flex items-center justify-center rounded-xl bg-white border border-slate-100 text-slate-400 hover:text-rose-500 hover:border-rose-200 transition-all shadow-sm\"\r\n            @click=\"fecharModalProduto()\"\r\n            type=\"button\"\r\n          >\r\n            <i class=\"pi pi-times text-xs\"></i>\r\n          </button>\r\n        </header>\r\n\r\n        <!-- Body (PADRÃO) -->\r\n        <div class=\"p-6 overflow-y-auto\">\r\n          <form class=\"grid grid-cols-12 gap-x-6 gap-y-6\" @submit.prevent=\"salvarProduto\">\r\n            <div class=\"col-span-12\">\r\n              <Input\r\n                v-model=\"modalProduto.form.nome_produto\"\r\n                label=\"Nome do Produto\"\r\n                placeholder=\"EX: MDF BRANCO TX\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-6\">\r\n              <Input\r\n                v-model=\"modalProduto.form.marca\"\r\n                label=\"Marca / Fabricante\"\r\n                placeholder=\"EX: DURATEX\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-6\">\r\n              <SearchInput\r\n                v-model=\"modalProduto.form.unidade\"\r\n                mode=\"select\"\r\n                label=\"Unidade Medida\"\r\n                :options=\"unidadesOptions\"\r\n                placeholder=\"SELECIONE...\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-6\">\r\n              <Input\r\n                v-model=\"modalProduto.form.cor\"\r\n                label=\"Cor / Acabamento\"\r\n                placeholder=\"EX: BRANCO TX\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"col-span-12 md:col-span-6\">\r\n              <Input\r\n                v-model=\"modalProduto.form.medida\"\r\n                label=\"Espessura/Medida\"\r\n                placeholder=\"EX: 18MM\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Footer (PADRÃO) -->\r\n            <div class=\"col-span-12 flex items-center justify-end gap-4 pt-6 border-t border-slate-100 mt-2\">\r\n              <button\r\n                type=\"button\"\r\n                @click=\"fecharModalProduto()\"\r\n                class=\"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 hover:text-slate-800 transition-colors\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n\r\n              <Button\r\n                variant=\"primary\"\r\n                type=\"submit\"\r\n                :loading=\"modalProduto.salvando\"\r\n                class=\"!h-12 !rounded-[1.2rem] !px-8 shadow-xl shadow-brand-primary/20 font-black text-[10px] uppercase tracking-widest\"\r\n              >\r\n                <i class=\"pi pi-check-circle mr-3\"></i>\r\n                Cadastrar e Usar\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Transition>\r\n</Teleport>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { maskMoneyBR } from '@/utils/masks'\r\nimport { PlanoCorteService, FornecedorService, ProducaoService } from '@/services/index'\r\nimport { PIPELINE_PLANO_CORTE, UNIDADES } from '@/constantes'\r\nimport { confirm } from '@/services/confirm'\r\n\r\nimport { can } from '@/services/permissions'\r\nimport { notify } from '@/services/notify'\r\n\r\ndefinePage({ meta: { perm: 'plano_corte.ver' } })\r\n\r\n\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\n\r\n// ID & ESTADO\r\nconst rawId = computed(() => String(route.params.id || 'novo'))\r\nconst isEdit = computed(() => rawId.value !== 'novo')\r\nconst planoId = computed(() => (isEdit.value ? Number(String(rawId.value).replace(/\\D/g, '')) : null))\r\n\r\nconst permSalvarPlano = () => (isEdit.value ? 'plano_corte.editar' : 'plano_corte.criar')\r\n\r\n\r\nconst loading = ref(true)\r\nconst salvando = ref(false)\r\nconst encaminhando = ref(false)\r\n\r\n// OPÇÕES (CUIDADO: CERTIFIQUE-SE QUE constantes ESTÁ CARREGADO)\r\nconst statusPlanoOptions = computed(() =>\r\n  (PIPELINE_PLANO_CORTE || []).map(s => ({\r\n    label: s.label,\r\n    value: s.key,\r\n  }))\r\n)\r\n\r\n\r\nconst unidadesOptions = computed(() =>\r\n  (UNIDADES || []).map(u => ({ label: u.label, value: u.key }))\r\n)\r\n\r\n\r\n// CABEÇALHO\r\nconst dataVenda = ref('')\r\nconst statusPlano = ref('')\r\nconst fornecedor = ref([])\r\nconst fornecedorSelecionado = ref(null)\r\nconst fornecedorOptions = computed(() => fornecedor.value.map(f => ({ label: f.razao_social, value: f.id })))\r\n\r\n// ITENS DO PLANO\r\nconst itensDisponiveis = ref([])\r\nconst itens = ref([])\r\nconst itemNovo = ref({ item_id: null, unidade: '', quantidade: '', valorUnitarioMask: 'R$ 0,00' })\r\n\r\n// --- LÓGICA DE CÁLCULO DO VALOR TOTAL DO ITEM ---\r\nconst itemNovoValorTotalNumerico = computed(() => {\r\n  const qtd = Number(itemNovo.value.quantidade) || 0\r\n  const vUnit = Number(String(itemNovo.value.valorUnitarioMask).replace(/\\D/g, '')) / 100 || 0\r\n  return qtd * vUnit\r\n})\r\n\r\nconst itemNovoTotalExibicao = computed(() => maskMoneyBR(itemNovoValorTotalNumerico.value))\r\n// ------------------------------------------------\r\n\r\nconst produtoOptions = computed(() => itensDisponiveis.value.map(i => ({ label: `${i.nome_produto} ${i.cor ? `(${i.cor})` : ''}`, value: i.id })))\r\nconst podeAdicionarItem = computed(() => !!itemNovo.value.item_id && Number(itemNovo.value.quantidade) > 0)\r\nconst totalCalculado = computed(() => itens.value.reduce((acc, it) => acc + (it.valor_total || 0), 0))\r\n\r\nconst columnsItens = [\r\n  { key: 'produto', label: 'Insumo Selecionado' },\r\n  { key: 'quantidade', label: 'Qtd', width: '100px', align: 'center' },\r\n  { key: 'valor_unitario', label: 'Custo Unit.', width: '140px' },\r\n  { key: 'valor_total', label: 'Total Item', width: '140px' },\r\n  { key: 'acoes', label: '', width: '60px', align: 'right' },\r\n]\r\n\r\n// MÁSCARA DINÂMICA\r\nwatch(() => itemNovo.value.valorUnitarioMask, (v) => {\r\n  const n = String(v || '').replace(/\\D/g, '')\r\n  itemNovo.value.valorUnitarioMask = maskMoneyBR(n ? Number(n) / 100 : 0)\r\n})\r\n\r\n// MODAL PRODUTO\r\nconst modalProduto = ref({\r\n  aberto: false,\r\n  salvando: false,\r\n  form: {\r\n    fornecedor_id: null,\r\n    nome_produto: '',\r\n    marca: '',\r\n    cor: '',\r\n    medida: '',\r\n    unidade: 'UN',\r\n    status: 'ATIVO',\r\n  },\r\n})\r\n\r\n\r\nfunction abrirModalProduto() {\r\n  if (!can(permSalvarPlano())) return notify.error('Acesso negado.')\r\n\r\n  if (!fornecedorSelecionado.value) return\r\n  modalProduto.value.form.fornecedor_id = Number(fornecedorSelecionado.value)\r\n  modalProduto.value.aberto = true\r\n}\r\n\r\n\r\nfunction fecharModalProduto() {\r\n  modalProduto.value.aberto = false\r\n  modalProduto.value.form = {\r\n    fornecedor_id: null,\r\n    nome_produto: '',\r\n    marca: '',\r\n    cor: '',\r\n    medida: '',\r\n    unidade: 'UN',\r\n    status: 'ATIVO',\r\n  }\r\n}\r\n\r\n\r\nasync function carregarItensDisponiveis(fId) {\r\n  const { data } = await PlanoCorteService.itens.listar(Number(fId))\r\n  itensDisponiveis.value = data || []\r\n}\r\n\r\n\r\nasync function salvarProduto() {\r\n  if (!can(permSalvarPlano())) return notify.error('Acesso negado.')\r\n\r\n  if (!modalProduto.value.form.nome_produto?.trim()) return\r\n  if (!modalProduto.value.form.fornecedor_id) return\r\n\r\n  modalProduto.value.salvando = true\r\n  try {\r\n    const payload = {\r\n      fornecedor_id: modalProduto.value.form.fornecedor_id,\r\n      nome_produto: modalProduto.value.form.nome_produto.trim(),\r\n      marca: modalProduto.value.form.marca?.trim() || null,\r\n      cor: modalProduto.value.form.cor?.trim() || null,\r\n      medida: modalProduto.value.form.medida?.trim() || null,\r\n      unidade: modalProduto.value.form.unidade || null,\r\n      status: modalProduto.value.form.status,\r\n\r\n      // obrigatórios do plano_corte_item\r\n      quantidade: 0,\r\n      valor_unitario: 0,\r\n      valor_total: 0,\r\n    }\r\n\r\n    const { data } = await PlanoCorteService.itens.salvar(null, payload)\r\n\r\n    await carregarItensDisponiveis(fornecedorSelecionado.value)\r\n\r\n    // “Cadastrar e usar”\r\n    itemNovo.value.item_id = data.id\r\n    itemNovo.value.unidade = data.unidade || ''\r\n\r\n    fecharModalProduto()\r\n  } finally {\r\n    modalProduto.value.salvando = false\r\n  }\r\n}\r\n\r\n\r\n// excluir plano (confirm)\r\nasync function confirmarExcluirPlano() {\r\n  if (!can('plano_corte.excluir')) return notify.error('Acesso negado.')\r\n\r\n  if (!isEdit.value) return\r\n\r\n  const ok = await confirm.show(\r\n    'Excluir Plano de Corte',\r\n    `Deseja excluir permanentemente o Plano de Corte #${planoId.value}? Esta ação não pode ser desfeita.`,\r\n  )\r\n  if (!ok) return\r\n\r\n  salvando.value = true\r\n  try {\r\n    await PlanoCorteService.excluir(planoId.value)\r\n    router.push('/plano-corte')\r\n  } finally {\r\n    salvando.value = false\r\n  }\r\n}\r\n\r\nasync function encaminharParaProducao() {\r\n  if (!can('plano_corte.enviar_producao')) return notify.error('Acesso negado.')\r\n  if (!isEdit.value) return\r\n\r\n  encaminhando.value = true\r\n  try {\r\n    await ProducaoService.encaminhar({\r\n  origem_tipo: 'PLANO_CORTE',\r\n  origem_id: planoId.value,\r\n  // status opcional: se não mandar, backend usa 'ABERTO'\r\n  // status: 'ABERTO',\r\n})\r\n\r\n\r\n    const { data } = await PlanoCorteService.buscar(planoId.value)\r\n    statusPlano.value = data.status ?? ''\r\n    notify.success('Enviado para produção.')\r\n  } catch (err) {\r\n    notify.error(err?.response?.data?.message || 'Erro ao enviar para produção.')\r\n  } finally {\r\n    encaminhando.value = false\r\n  }\r\n}\r\n\r\n// AÇÕES\r\nasync function onSelecionarFornecedor(v) {\r\n  fornecedorSelecionado.value = v\r\n  if (v) await carregarItensDisponiveis(v)\r\n  itens.value = []\r\n  limparItemNovo()\r\n}\r\n\r\nfunction planoKey(key) {\r\n  const k = PIPELINE_PLANO_CORTE.find(p => p.key === key)?.key\r\n  if (!k) throw new Error(`PIPELINE_PLANO_CORTE key não encontrada: ${key}`)\r\n  return k\r\n}\r\n\r\n\r\nfunction onSelecionarProdutoNovo(v) {\r\n  const itemId = Number(v)\r\n  const item = itensDisponiveis.value.find(i => Number(i.id) === itemId)\r\n  itemNovo.value.unidade = item?.unidade || ''\r\n}\r\n\r\n\r\nfunction limparItemNovo() { itemNovo.value = { item_id: null, unidade: '', quantidade: '', valorUnitarioMask: 'R$ 0,00' } }\r\n\r\n// remover item (confirm)\r\nasync function confirmarRemoverItemPlano(index) {\r\n  if (!can(permSalvarPlano())) return notify.error('Acesso negado.')\r\n\r\n  const row = itens.value?.[index]\r\n  const nome = row?.item?.nome_produto || 'ITEM'\r\n\r\n  const ok = await confirm.show('Remover Item', `Deseja remover \"${nome}\" deste plano?`)\r\n  if (!ok) return\r\n\r\n  removerItem(index)\r\n}\r\n\r\nfunction removerItem(index) {\r\n  if (!can(permSalvarPlano())) return notify.error('Acesso negado.')\r\n  itens.value.splice(index, 1)\r\n}\r\n\r\n// adicionar item\r\nfunction registrarItemNovo() {\r\n  if (!can(permSalvarPlano())) return notify.error('Acesso negado.')\r\n\r\n  const itemId = Number(itemNovo.value.item_id)\r\n  const item = itensDisponiveis.value.find(i => Number(i.id) === itemId)\r\n  if (!item) return\r\n\r\n  // 1. Calcule os valores ANTES de limpar o formulário\r\n  const qtd = Number(itemNovo.value.quantidade) || 0\r\n  const vUnit = Number(String(itemNovo.value.valorUnitarioMask).replace(/\\D/g, '')) / 100 || 0\r\n  const vTotal = Number((qtd * vUnit).toFixed(2)) // Força 2 casas decimais\r\n\r\n  // 2. Adicione ao array com os valores calculados manualmente\r\n  itens.value.push({\r\n    item_id: item.id,\r\n    item: { \r\n      nome_produto: item.nome_produto, \r\n      cor: item.cor, \r\n      marca: item.marca \r\n    },\r\n    quantidade: qtd,\r\n    valor_unitario: vUnit,\r\n    valor_total: vTotal, // <--- Valor estático e seguro\r\n    status: 'ATIVO'\r\n  })\r\n\r\n  limparItemNovo()\r\n}\r\n\r\n\r\n\r\nasync function salvar() {\r\n  const perm = permSalvarPlano()\r\n  if (!can(perm)) return notify.error('Acesso negado.')\r\n\r\n  salvando.value = true\r\n  try {\r\nconst payload = {\r\n  fornecedor_id: Number(fornecedorSelecionado.value),\r\n  data_venda: dataVenda.value,\r\n  produtos: itens.value,\r\n  ...(isEdit.value ? {} : { status: statusPlano.value }),\r\n}\r\n\r\n\r\n    await PlanoCorteService.salvar(isEdit.value ? planoId.value : null, payload)\r\n    router.push('/plano-corte')\r\n  } finally { salvando.value = false }\r\n}\r\n\r\nonMounted(async () => {\r\n  loading.value = true\r\n  try {\r\n    const { data: fData } = await FornecedorService.listar()\r\n    fornecedor.value = fData || []\r\n\r\n\r\n    if (isEdit.value) {\r\n      const { data } = await PlanoCorteService.buscar(planoId.value)\r\n\r\n      fornecedorSelecionado.value = data.fornecedor_id ?? null\r\n      statusPlano.value = data.status ?? ''\r\n\r\n      dataVenda.value = data.data_venda?.slice(0, 10) || ''\r\n\r\n      itens.value = (data.produtos || []).map(p => ({\r\n        ...p,\r\n        quantidade: Number(p.quantidade) || 0,\r\n        valor_unitario: Number(p.valor_unitario) || 0,\r\n        valor_total: Number(p.valor_total) || 0,\r\n      }))\r\n\r\n      if (data.fornecedor_id) await carregarItensDisponiveis(data.fornecedor_id)\r\n    } else {\r\n      dataVenda.value = new Date().toISOString().slice(0, 10)\r\n      statusPlano.value = planoKey('EM_ABERTO')\r\n\r\n    }\r\n  } catch (err) {\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n})\r\n\r\n</script>"],"names":["PIPELINE_PLANO_CORTE","router","useRouter","route","useRoute","rawId","computed","isEdit","planoId","permSalvarPlano","loading","ref","salvando","encaminhando","statusPlanoOptions","s","unidadesOptions","UNIDADES","u","dataVenda","statusPlano","fornecedor","fornecedorSelecionado","fornecedorOptions","f","itensDisponiveis","itens","itemNovo","itemNovoValorTotalNumerico","qtd","vUnit","itemNovoTotalExibicao","maskMoneyBR","produtoOptions","i","podeAdicionarItem","totalCalculado","acc","it","columnsItens","watch","v","n","modalProduto","abrirModalProduto","can","notify","fecharModalProduto","carregarItensDisponiveis","fId","data","PlanoCorteService","salvarProduto","_a","payload","_b","_c","_d","confirmarExcluirPlano","confirm","encaminharParaProducao","ProducaoService","err","onSelecionarFornecedor","limparItemNovo","planoKey","key","k","p","onSelecionarProdutoNovo","itemId","item","confirmarRemoverItemPlano","index","row","nome","removerItem","registrarItemNovo","vTotal","salvar","perm","onMounted","fData","FornecedorService","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_Card","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_cache","$event","_unref","_hoisted_5","_hoisted_31","_Fragment","_hoisted_6","_hoisted_7","_component_SearchInput","_hoisted_8","_component_Input","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_createBlock","_component_Button","_component_Table","_withCtx","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_32","_hoisted_33","_hoisted_34","_createTextVNode","_Teleport","_Transition","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43"],"mappings":"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"}