import{x as V,y as A,f as u,g as i,i as I,z as L,r as w,c as l,o as n,b as t,e as d,A as v,l as p,t as m,B as O,D as j,s as M}from"./index-CH22lQIC.js";const F={class:"w-full min-h-[70vh] animate-page-in"},N={class:"w-full max-w-[1200px] mx-auto p-4 space-y-3"},T={class:"flex items-center justify-between gap-3"},E={class:"flex items-center gap-2"},Q={class:"px-3 h-10 flex items-center rounded-xl border border-slate-200 text-xs font-black"},$={class:"p-4 border-b border-slate-100"},P={class:"text-sm font-black text-slate-800 truncate"},W={class:"text-[10px] font-bold text-slate-400 uppercase tracking-wider"},G={class:"p-4 overflow-auto"},H={key:0,class:"p-10 text-center text-slate-400 text-[10px] font-black uppercase tracking-widest"},J={key:1,class:"p-6 rounded-xl border border-rose-100 bg-rose-50 text-rose-600 text-[10px] font-black uppercase tracking-widest"},K={key:2,class:"flex justify-center"},X=["src"],Y=["src"],Z={key:2,class:"p-10 text-center text-slate-500 text-[10px] font-black uppercase tracking-widest"},ae={__name:"[id]",setup(ee){const f=V(),z=A(),h=u(""),_=i(()=>String(f.params.id||"").replace(/\D/g,"")),k=i(()=>String(f.query.name||`ARQUIVO_${_.value}`)),g=i(()=>String(f.query.type||"")),x=i(()=>(h.value||g.value||"").toLowerCase()),B=i(()=>x.value.startsWith("image/")),C=i(()=>x.value.includes("pdf")),b=u(!1),c=u(""),a=u(""),r=u(1);function U(){r.value=Math.min(3,r.value+.1)}function q(){r.value=Math.max(.3,r.value-.1)}function R(){z.back()}async function D(){var s;if(!_.value){c.value="ID inválido.";return}b.value=!0,c.value="";try{const e=await j.baixarBlob(_.value),o=String(((s=e==null?void 0:e.headers)==null?void 0:s["content-type"])||g.value||"application/octet-stream");h.value=o;const y=new Blob([e.data],{type:o});a.value=URL.createObjectURL(y)}catch(e){console.error(e),c.value="Falha ao abrir arquivo.",M.error("Falha ao abrir arquivo.")}finally{b.value=!1}}function S(){if(!a.value)return;const s=document.createElement("a");s.href=a.value,s.download=k.value||"arquivo",s.click()}return I(D),L(()=>{a.value&&URL.revokeObjectURL(a.value)}),(s,e)=>{const o=w("Button"),y=w("Card");return n(),l("div",F,[t("div",N,[t("div",T,[d(o,{variant:"secondary",size:"md",class:"!h-10",onClick:R},{default:v(()=>[...e[0]||(e[0]=[t("i",{class:"pi pi-arrow-left mr-2 text-xs"},null,-1),p(" Voltar ",-1)])]),_:1}),t("div",E,[d(o,{variant:"secondary",size:"md",class:"!h-10",onClick:q},{default:v(()=>[...e[1]||(e[1]=[p("-",-1)])]),_:1}),t("div",Q,m(Math.round(r.value*100))+"% ",1),d(o,{variant:"secondary",size:"md",class:"!h-10",onClick:U},{default:v(()=>[...e[2]||(e[2]=[p("+",-1)])]),_:1}),d(o,{variant:"primary",size:"md",class:"!h-10",onClick:S,disabled:!a.value},{default:v(()=>[...e[3]||(e[3]=[t("i",{class:"pi pi-download mr-2 text-xs"},null,-1),p(" Download ",-1)])]),_:1},8,["disabled"])])]),d(y,null,{default:v(()=>[t("div",$,[t("div",P,m(k.value),1),t("div",W,m(x.value||"ARQUIVO"),1)]),t("div",G,[b.value?(n(),l("div",H," Carregando... ")):c.value?(n(),l("div",J,m(c.value),1)):(n(),l("div",K,[B.value?(n(),l("img",{key:0,src:a.value,style:O({transform:`scale(${r.value})`}),class:"origin-top",alt:"arquivo"},null,12,X)):C.value?(n(),l("iframe",{key:1,src:a.value,class:"w-full",style:{height:"75vh"}},null,8,Y)):(n(),l("div",Z," Visualização não suportada. Use Download. "))]))])]),_:1})])])}}};export{ae as default};
//# sourceMappingURL=_id_-CYvnImDd.js.map
