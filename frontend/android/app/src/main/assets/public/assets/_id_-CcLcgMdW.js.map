{"version":3,"file":"_id_-CcLcgMdW.js","sources":["../../src/pages/produtos/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"w-full max-w-5xl mx-auto py-8 px-4 animate-in fade-in duration-500\">\r\n    <header class=\"flex flex-col md:flex-row md:items-end justify-between gap-4 mb-8\">\r\n      <div>\r\n        <div class=\"flex items-center gap-3 mb-2\">\r\n          <div class=\"w-10 h-10 rounded-xl bg-slate-900 flex items-center justify-center text-white\">\r\n            <i class=\"pi pi-box text-xl\"></i>\r\n          </div>\r\n          <h1 class=\"text-2xl font-semibold tracking-tight text-slate-900\">\r\n            {{ isEdit ? 'Editar Produto' : 'Novo Produto' }}\r\n          </h1>\r\n        </div>\r\n        <p class=\"text-sm text-slate-500\">Gestão de insumos e controle de materiais de estoque.</p>\r\n      </div>\r\n\r\n      <button\r\n        type=\"button\"\r\n        @click=\"confirmarDescartarProduto\"\r\n        class=\"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all text-sm font-medium\"\r\n      >\r\n        <i class=\"pi pi-arrow-left text-xs\"></i>\r\n        <span>Voltar para lista</span>\r\n      </button>\r\n    </header>\r\n\r\n    <Card class=\"border-none shadow-sm ring-1 ring-slate-200 overflow-hidden !rounded-2xl\">\r\n      <div v-if=\"loading\" class=\"py-24 flex flex-col items-center justify-center gap-4\">\r\n        <div class=\"w-10 h-10 border-2 border-slate-200 border-t-slate-900 rounded-full animate-spin\"></div>\r\n        <p class=\"text-xs font-medium text-slate-400 uppercase tracking-widest\">Carregando...</p>\r\n      </div>\r\n\r\n      <form v-else @submit.prevent=\"confirmarSalvarProduto\" class=\"divide-y divide-slate-100\">\r\n        <div class=\"p-8\">\r\n          <div class=\"grid grid-cols-12 gap-8\">\r\n            <div class=\"col-span-12 lg:col-span-8 space-y-6\">\r\n              <div class=\"flex items-center gap-2 mb-2\">\r\n                <span class=\"w-1.5 h-1.5 rounded-full bg-blue-600\"></span>\r\n                <h3 class=\"text-xs font-bold uppercase tracking-wider text-slate-400\">Identificação Geral</h3>\r\n              </div>\r\n\r\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <SearchInput\r\n                  v-model=\"form.fornecedor_id\"\r\n                  mode=\"select\"\r\n                  label=\"Fornecedor Principal\"\r\n                  :options=\"fornecedorOptions\"\r\n                  required\r\n                />\r\n                <SearchInput\r\n                  v-model=\"form.status\"\r\n                  mode=\"select\"\r\n                  label=\"Status do Cadastro\"\r\n                  :options=\"statusOptions\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div class=\"md:col-span-2\">\r\n                  <Input\r\n                    v-model=\"form.nome_produto\"\r\n                    label=\"Nome do Produto\"\r\n                    placeholder=\"Ex: Chapa de MDF 18mm\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <SearchInput\r\n                  v-model=\"form.unidade\"\r\n                  mode=\"select\"\r\n                  label=\"Unidade\"\r\n                  :options=\"unidadesOptions\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-span-12 lg:col-span-4\">\r\n              <div class=\"flex flex-col h-full\">\r\n                <span class=\"text-xs font-bold uppercase tracking-wider text-slate-400 mb-4 ml-1\">Imagem do Produto</span>\r\n                \r\n                <div \r\n                  class=\"relative group aspect-square rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 flex flex-col items-center justify-center overflow-hidden transition-all hover:border-slate-300\"\r\n                  :class=\"{'cursor-pointer': previewImagem}\"\r\n                  @click=\"previewImagem ? abrirPreviewImagem() : null\"\r\n                >\r\n                  <img v-if=\"previewImagem\" :src=\"previewImagem\" class=\"w-full h-full object-contain p-4\" />\r\n                  <div v-else class=\"text-center p-6\">\r\n                    <i class=\"pi pi-image text-slate-300 text-3xl mb-2\"></i>\r\n                    <p class=\"text-[10px] text-slate-400 font-medium uppercase tracking-tighter leading-tight\">\r\n                      {{ isEdit ? 'Sem imagem anexada' : 'Salve para anexar' }}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div v-if=\"isEdit && can('produtos.editar')\" class=\"absolute inset-0 bg-slate-900/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2\">\r\n                    <button type=\"button\" @click.stop=\"imagemInput?.click()\" class=\"p-2 bg-white rounded-lg text-slate-900 hover:scale-110 transition-transform\">\r\n                      <i class=\"pi pi-upload\"></i>\r\n                    </button>\r\n                    <button v-if=\"previewImagem\" type=\"button\" @click.stop=\"confirmarRemoverImagem\" class=\"p-2 bg-white rounded-lg text-rose-600 hover:scale-110 transition-transform\">\r\n                      <i class=\"pi pi-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <input ref=\"imagemInput\" type=\"file\" class=\"hidden\" accept=\"image/*\" @change=\"onImagemPick\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"p-8 bg-slate-50/30\">\r\n          <div class=\"flex items-center gap-2 mb-6\">\r\n            <span class=\"w-1.5 h-1.5 rounded-full bg-slate-400\"></span>\r\n            <h3 class=\"text-xs font-bold uppercase tracking-wider text-slate-400\">Atributos Técnicos</h3>\r\n          </div>\r\n          \r\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <Input v-model=\"form.marca\" label=\"Marca / Fabricante\" placeholder=\"Ex: Duratex\" />\r\n            <Input v-model=\"form.cor\" label=\"Cor / Acabamento\" placeholder=\"Ex: Branco Texturizado\" />\r\n            <Input v-model=\"form.medida\" label=\"Dimensões\" placeholder=\"Ex: 2750x1840mm\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"p-8\">\r\n          <div class=\"grid grid-cols-12 gap-6 items-end\">\r\n            <div class=\"col-span-12 md:col-span-4\">\r\n              <Input\r\n                v-model=\"quantidadeInput\"\r\n                label=\"Qtd. em Estoque\"\r\n                type=\"number\"\r\n                required\r\n              />\r\n            </div>\r\n            <div class=\"col-span-12 md:col-span-4\">\r\n              <Input\r\n                v-model=\"valorUnitarioMask\"\r\n                label=\"Custo Unitário (R$)\"\r\n                required\r\n              />\r\n            </div>\r\n            <div class=\"col-span-12 md:col-span-4\">\r\n              <div class=\"p-4 bg-slate-900 rounded-xl text-white flex flex-col justify-center\">\r\n                <span class=\"text-[10px] font-bold uppercase tracking-[0.1em] text-slate-400 mb-1\">Total em Inventário</span>\r\n                <span class=\"text-xl font-semibold tabular-nums\">{{ valorTotalMask }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"p-8 flex items-center justify-end gap-4 bg-slate-50/50\">\r\n          <button\r\n            type=\"button\"\r\n            @click=\"router.push('/produtos')\"\r\n            class=\"px-6 py-3 text-sm font-semibold text-slate-500 hover:text-rose-600 transition-colors\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n\r\n          <Button\r\n            v-if=\"can(isEdit ? 'produtos.editar' : 'produtos.criar')\"\r\n            type=\"submit\"\r\n            :loading=\"salvando\"\r\n            variant=\"primary\"\r\n            class=\"!h-12 !px-8 !rounded-xl bg-slate-900 text-white font-bold text-sm shadow-lg shadow-slate-200 active:scale-95 transition-all\"\r\n          >\r\n            {{ isEdit ? 'Atualizar Produto' : 'Confirmar Cadastro' }}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Card>\r\n\r\n    <Teleport to=\"body\">\r\n      <Transition name=\"fade\">\r\n        <div\r\n          v-if=\"modalImagemOpen\"\r\n          class=\"fixed inset-0 z-[60] bg-slate-950/80 backdrop-blur-md flex items-center justify-center p-8\"\r\n          @click.self=\"modalImagemOpen = false\"\r\n        >\r\n          <div class=\"relative max-w-4xl w-full bg-white rounded-3xl overflow-hidden shadow-2xl\">\r\n            <button @click=\"modalImagemOpen = false\" class=\"absolute top-4 right-4 z-10 w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center\">\r\n              <i class=\"pi pi-times\"></i>\r\n            </button>\r\n            <div class=\"p-4 flex items-center justify-center bg-white min-h-[400px]\">\r\n              <img :src=\"previewImagem\" class=\"max-h-[80vh] w-auto object-contain\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Transition>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.fade-enter-active, .fade-leave-active { transition: opacity 0.2s ease; }\r\n.fade-enter-from, .fade-leave-to { opacity: 0; }\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { maskMoneyBR } from '@/utils/masks'\r\nimport { UNIDADES } from '@/constantes'\r\nimport { ProdutosService, FornecedorService } from '@/services/index'\r\nimport { confirm } from '@/services/confirm'\r\nimport { ArquivosService } from '@/services/arquivos.service' \r\n\r\nimport { can } from '@/services/permissions'\r\nimport { notify } from '@/services/notify'\r\n\r\ndefinePage({ meta: { perm: 'produtos.ver' } })\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst rawId = computed(() => String(route.params.id || 'novo'))\r\nconst isEdit = computed(() => rawId.value !== 'novo')\r\nconst produtoId = computed(() =>\r\n  isEdit.value ? Number(String(rawId.value).replace(/\\D/g, '')) : null,\r\n)\r\nconst modalImagemOpen = ref(false)\r\n\r\nfunction abrirPreviewImagem() {\r\n  if (!previewImagem.value) return\r\n  modalImagemOpen.value = true\r\n}\r\n\r\n\r\nconst imagemInput = ref(null)\r\nconst uploadingImagem = ref(false)\r\nconst removendoImagem = ref(false)\r\n\r\nconst loading = ref(false)\r\nconst salvando = ref(false)\r\n\r\nconst fornecedor = ref([])\r\nconst fornecedorOptions = computed(() =>\r\n  (fornecedor.value || []).map((f) => ({ label: f.razao_social, value: f.id })),\r\n)\r\n\r\nconst statusOptions = [\r\n  { label: 'ATIVO', value: 'ATIVO' },\r\n  { label: 'INATIVO', value: 'INATIVO' },\r\n]\r\n\r\n// ======= FORM (estado numérico) =======\r\nconst form = ref({\r\n  fornecedor_id: null,\r\n  nome_produto: '',\r\n  marca: '',\r\n  cor: '',\r\n  medida: '',\r\n  unidade: '',\r\n  quantidade: 0,\r\n  valor_unitario: 0,\r\n  valor_total: 0,\r\n  status: 'ATIVO',\r\n\r\n  // ✅ novo campo\r\n  imagem_url: '',\r\n})\r\n\r\n// preview simples (não altera lógica)\r\nconst previewImagem = computed(() => {\r\n  const url = String(form.value.imagem_url || '').trim()\r\n  return url.length ? url : ''\r\n})\r\n\r\n// ======= Inputs auxiliares (máscaras) =======\r\nconst quantidadeInput = ref('')\r\nconst valorUnitarioMask = ref('R$ 0,00')\r\n\r\nconst valorTotalNumerico = computed(() => {\r\n  const qtd = Number(form.value.quantidade || 0)\r\n  const v = Number(form.value.valor_unitario || 0)\r\n  return qtd * v\r\n})\r\n\r\nwatch(valorTotalNumerico, (t) => {\r\n  form.value.valor_total = t\r\n})\r\n\r\nconst valorTotalMask = computed(() => maskMoneyBR(valorTotalNumerico.value))\r\n\r\nwatch(quantidadeInput, (v) => {\r\n  const n = String(v || '').replace(/\\D/g, '')\r\n  form.value.quantidade = n ? Number(n) : 0\r\n  if (v !== n) quantidadeInput.value = n\r\n})\r\n\r\nwatch(valorUnitarioMask, (v) => {\r\n  const n = String(v || '').replace(/\\D/g, '')\r\n  const valor = n ? Number(n) / 100 : 0\r\n  form.value.valor_unitario = valor\r\n\r\n  const formatado = maskMoneyBR(valor)\r\n  if (v !== formatado) valorUnitarioMask.value = formatado\r\n})\r\n\r\n// ======= UNIDADES (constantes) =======\r\nconst unidadesOptions = computed(() => UNIDADES.map((u) => ({ label: u.label, value: u.key })))\r\n\r\n// ======= CRUD =======\r\nfunction validar() {\r\n  if (!form.value.fornecedor_id) return 'Selecione o fornecedor.'\r\n  if (!form.value.nome_produto) return 'Informe o nome do produto.'\r\n  if (!form.value.unidade) return 'Selecione a unidade.'\r\n  if (!form.value.quantidade || Number(form.value.quantidade) <= 0) return 'Informe a quantidade.'\r\n  if (!form.value.valor_unitario || Number(form.value.valor_unitario) <= 0) return 'Informe o valor unitário.'\r\n  if (!form.value.status) return 'Informe o status.'\r\n  return null\r\n}\r\n\r\nfunction resetForm() {\r\n  form.value = {\r\n    fornecedor_id: null,\r\n    nome_produto: '',\r\n    marca: '',\r\n    cor: '',\r\n    medida: '',\r\n    unidade: '',\r\n    quantidade: 0,\r\n    valor_unitario: 0,\r\n    valor_total: 0,\r\n    status: 'ATIVO',\r\n    imagem_url: '',\r\n  }\r\n  quantidadeInput.value = ''\r\n  valorUnitarioMask.value = 'R$ 0,00'\r\n}\r\n\r\nasync function carregarFornecedor() {\r\n  const res = await FornecedorService.listar()\r\n  const data = res?.data ?? res\r\n  fornecedor.value = Array.isArray(data) ? data : []\r\n}\r\n\r\nasync function carregarProduto() {\r\n  const res = await ProdutosService.buscar(produtoId.value)\r\n  const data = res?.data ?? res\r\n\r\n  form.value = {\r\n    ...form.value,\r\n    ...data,\r\n    fornecedor_id: data.fornecedor_id ?? null,\r\n    quantidade: Number(data.quantidade || 0),\r\n    valor_unitario: Number(data.valor_unitario || 0),\r\n    valor_total: Number(data.valor_total || 0),\r\n    status: data.status || 'ATIVO',\r\n    imagem_url: data.imagem_url || '',\r\n  }\r\n\r\n  quantidadeInput.value = form.value.quantidade ? String(form.value.quantidade) : ''\r\n  valorUnitarioMask.value = maskMoneyBR(form.value.valor_unitario || 0)\r\n}\r\n\r\nasync function onImagemPick(e) {\r\n  if (!isEdit.value) {\r\n    notify.warn('Salve o produto primeiro para anexar imagem.')\r\n    if (imagemInput.value) imagemInput.value.value = ''\r\n    return\r\n  }\r\n\r\n  if (!can('produtos.editar')) {\r\n    notify.error('Acesso negado.')\r\n    if (imagemInput.value) imagemInput.value.value = ''\r\n    return\r\n  }\r\n\r\n  const file = e?.target?.files?.[0]\r\n  if (!file) return\r\n\r\n  if (!file.type?.startsWith('image/')) {\r\n    notify.error('Selecione um arquivo de imagem.')\r\n    if (imagemInput.value) imagemInput.value.value = ''\r\n    return\r\n  }\r\n\r\n  uploadingImagem.value = true\r\n  try {\r\n    const res = await ArquivosService.upload({\r\n      ownerType: 'PRODUTO',\r\n      ownerId: produtoId.value,\r\n      categoria: 'IMAGEM',\r\n      slotKey: 'IMAGEM_PRINCIPAL',\r\n      file,\r\n    })\r\n\r\n    const arq = res?.data ?? res\r\n    const url = arq?.url\r\n    if (!url) {\r\n      notify.error('Upload ok, mas não retornou URL.')\r\n      return\r\n    }\r\n\r\n    form.value.imagem_url = url\r\n    await ProdutosService.salvar(produtoId.value, { imagem_url: url })\r\n\r\n    notify.success('Imagem atualizada!')\r\n  } catch (err) {\r\n    notify.error(err?.response?.data?.message || 'Erro ao enviar imagem.')\r\n  } finally {\r\n    uploadingImagem.value = false\r\n    if (imagemInput.value) imagemInput.value.value = ''\r\n  }\r\n}\r\n\r\n\r\nasync function confirmarRemoverImagem() {\r\n  if (!isEdit.value) return\r\n  if (!can('produtos.editar')) return notify.error('Acesso negado.')\r\n\r\n  const ok = await confirm.show('Remover imagem', 'Deseja remover a imagem deste produto?')\r\n  if (!ok) return\r\n\r\n  removendoImagem.value = true\r\n  try {\r\n    // opcional: remover arquivo do slot (se seu backend tiver listagem por slot/categoria)\r\n    // se não tiver, só limpa o campo do produto mesmo:\r\n    await ProdutosService.salvar(produtoId.value, { imagem_url: null })\r\n    form.value.imagem_url = ''\r\n    notify.success('Imagem removida!')\r\n  } catch (err) {\r\n    notify.error(err?.response?.data?.message || 'Erro ao remover imagem.')\r\n  } finally {\r\n    removendoImagem.value = false\r\n  }\r\n}\r\n\r\nasync function confirmarSalvarProduto() {\r\n  const perm = isEdit.value ? 'produtos.editar' : 'produtos.criar'\r\n  if (!can(perm)) return notify.error('Acesso negado.')\r\n\r\n  const ok = await confirm.show(\r\n    isEdit.value ? 'Salvar Alterações' : 'Finalizar Cadastro',\r\n    isEdit.value\r\n      ? `Deseja salvar as alterações do Produto #${produtoId.value}?`\r\n      : 'Deseja finalizar o cadastro deste produto?',\r\n  )\r\n  if (!ok) return\r\n  await salvar()\r\n}\r\nfunction abrirImagem() {\r\n  if (!previewImagem.value) return\r\n  window.open(previewImagem.value, '_blank')\r\n}\r\n\r\n\r\nasync function confirmarDescartarProduto() {\r\n  const ok = await confirm.show('Descartar', 'Deseja sair sem salvar? As alterações serão perdidas.')\r\n  if (!ok) return\r\n  router.push('/produtos')\r\n}\r\n\r\nasync function salvar() {\r\n  const perm = isEdit.value ? 'produtos.editar' : 'produtos.criar'\r\n  if (!can(perm)) return notify.error('Acesso negado.')\r\n\r\n  const erro = validar()\r\n  if (erro) return alert(erro)\r\n\r\n  salvando.value = true\r\n  try {\r\n    const payload = {\r\n      ...form.value,\r\n      fornecedor_id: Number(form.value.fornecedor_id),\r\n      quantidade: Number(form.value.quantidade || 0),\r\n      valor_unitario: Number(form.value.valor_unitario || 0),\r\n      valor_total: Number(form.value.valor_total || 0),\r\n      unidade: form.value.unidade ? String(form.value.unidade) : null,\r\n      marca: form.value.marca ? String(form.value.marca) : null,\r\n      cor: form.value.cor ? String(form.value.cor) : null,\r\n      medida: form.value.medida ? String(form.value.medida) : null,\r\n\r\n      // ✅ imagem opcional\r\n      imagem_url: String(form.value.imagem_url || '').trim() || null,\r\n    }\r\n\r\n    await ProdutosService.salvar(isEdit.value ? produtoId.value : null, payload)\r\n    router.push('/produtos')\r\n  } catch (err) {\r\n    console.error(err)\r\n    alert(err?.response?.data?.message || 'Erro ao salvar.')\r\n  } finally {\r\n    salvando.value = false\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  const perm = isEdit.value ? 'produtos.editar' : 'produtos.criar'\r\n  if (!can(perm)) {\r\n    notify.error('Acesso negado.')\r\n    router.push('/produtos')\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    await carregarFornecedor()\r\n    if (isEdit.value) await carregarProduto()\r\n    else resetForm()\r\n} catch (err) {\r\n  console.error('[PRODUTOS] erro no mounted:', err)\r\n  notify.error('Erro ao carregar dados iniciais.')\r\n  router.push('/produtos')\r\n} finally {\r\n\r\n    loading.value = false\r\n  }\r\n})\r\n\r\n</script>\r\n"],"names":["route","useRoute","router","useRouter","rawId","computed","isEdit","produtoId","modalImagemOpen","ref","abrirPreviewImagem","previewImagem","imagemInput","uploadingImagem","removendoImagem","loading","salvando","fornecedor","fornecedorOptions","f","statusOptions","form","url","quantidadeInput","valorUnitarioMask","valorTotalNumerico","qtd","v","watch","t","valorTotalMask","maskMoneyBR","n","valor","formatado","unidadesOptions","UNIDADES","u","validar","resetForm","carregarFornecedor","res","FornecedorService","data","carregarProduto","ProdutosService","onImagemPick","e","notify","can","file","_b","_a","_c","ArquivosService","arq","err","_e","_d","confirmarRemoverImagem","confirm","confirmarSalvarProduto","perm","salvar","confirmarDescartarProduto","erro","payload","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_cache","_createVNode","_component_Card","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_component_SearchInput","$event","_hoisted_10","_hoisted_11","_component_Input","_hoisted_12","_hoisted_13","_normalizeClass","_hoisted_15","_hoisted_16","_unref","_hoisted_17","_withModifiers","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_createBlock","_component_Button","_Teleport","_Transition","_hoisted_28","_hoisted_29"],"mappings":"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"}