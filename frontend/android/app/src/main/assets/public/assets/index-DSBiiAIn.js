import{y as E,f as v,g as z,i as A,r as g,c as u,o as c,b as t,k as F,E as S,d as x,w as T,v as V,u as r,m as d,A as i,l as $,t as o,e as M,M as _,K as D,S as w,s as p,q as P}from"./index-CH22lQIC.js";const q={class:"w-full max-w-[1200px] mx-auto space-y-4 animate-page-in"},J={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-2"},L={class:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto"},R={class:"relative w-full sm:w-64"},G={class:"grid grid-cols-2 lg:grid-cols-4 gap-3"},I={class:"p-4 rounded-xl bg-white border border-slate-200 shadow-sm"},K={class:"text-xl font-black text-slate-800"},O={class:"p-4 rounded-xl bg-white border border-blue-200 shadow-sm"},U={class:"text-xl font-black text-blue-700"},H={class:"p-4 rounded-xl bg-white border border-emerald-200 shadow-sm"},Q={class:"text-xl font-black text-emerald-700"},W={class:"p-4 rounded-xl bg-white border border-amber-200 shadow-sm"},X={class:"text-xl font-black text-amber-700"},Y={class:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm"},Z={class:"py-1"},ee={class:"text-sm font-bold text-slate-800 block uppercase tracking-tight"},te={class:"text-sm font-medium text-slate-600 tabular-nums"},se={class:"text-sm font-medium text-slate-600 tabular-nums"},ae={class:"flex flex-col"},oe={class:"text-[11px] font-bold text-slate-500 lowercase"},le={class:"text-[10px] font-black text-brand-primary uppercase mt-0.5"},re={class:"flex flex-col"},ne={class:"px-2 py-0.5 rounded bg-slate-100 text-[9px] font-black text-slate-600 uppercase w-fit mb-1"},ie={key:0,class:"flex items-center gap-1 text-amber-600"},ce={class:"text-[9px] font-black uppercase"},de={class:"flex justify-end gap-1"},pe=["onClick"],ue=["onClick"],fe={__name:"index",setup(xe){const h=E(),m=v(!1),f=v(""),l=v([]),k=[{key:"razao_social",label:"Fornecedor",width:"35%"},{key:"cnpj",label:"CNPJ",width:"20%"},{key:"contato",label:"Contato",width:"25%"},{key:"comercial",label:"Comercial",width:"15%"},{key:"acoes",label:"",width:"5%",align:"right"}],y=z(()=>{const a=String(f.value||"").trim().toLowerCase();return a?l.value.filter(e=>[e.razao_social,e.nome_fantasia,e.cnpj,e.email,e.telefone,e.whatsapp,e.cidade,e.estado].filter(Boolean).join(" ").toLowerCase().includes(a)):l.value});function C(a){if(!d("fornecedores.editar"))return p.error("Acesso negado.");h.push(`/fornecedor/${a}`)}async function j(a){if(!d("fornecedores.excluir"))return p.error("Acesso negado.");const e=l.value.find(n=>n.id===a);if(await P.show("Excluir Fornecedor",`Deseja excluir "${(e==null?void 0:e.razao_social)||`Fornecedor #${a}`}"? Esta ação é permanente.`))try{await w.remover(a),l.value=l.value.filter(n=>n.id!==a),p.success("Fornecedor removido.")}catch{p.error("Erro ao excluir fornecedor.")}}async function N(){m.value=!0;try{const{data:a}=await w.listar();l.value=Array.isArray(a)?a:[]}catch{p.error("Erro ao carregar fornecedores.")}finally{m.value=!1}}return A(N),(a,e)=>{const b=g("Button"),n=g("Table");return c(),u("div",q,[t("div",J,[e[4]||(e[4]=F('<div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center"><i class="pi pi-truck text-lg"></i></div><div><h1 class="text-lg font-black text-slate-800 uppercase tracking-tight">Fornecedores</h1><p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Gestão de parceiros comerciais</p></div></div>',1)),t("div",L,[t("div",R,[e[2]||(e[2]=t("i",{class:"pi pi-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},null,-1)),T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),type:"text",placeholder:"Buscar por razão, cnpj ou cidade...",class:"w-full pl-9 pr-3 h-10 bg-white border border-slate-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-brand-primary/10 focus:border-brand-primary outline-none transition-all uppercase"},null,512),[[V,f.value]])]),r(d)("fornecedores.criar")?(c(),S(b,{key:0,variant:"primary",size:"md",class:"!h-10 !rounded-xl !px-4 text-xs font-black uppercase tracking-wider w-full sm:w-auto",onClick:e[1]||(e[1]=s=>r(h).push("/fornecedor/novo"))},{default:i(()=>[...e[3]||(e[3]=[t("i",{class:"pi pi-plus mr-1.5 text-[10px]"},null,-1),$(" Novo ",-1)])]),_:1})):x("",!0)])]),t("div",G,[t("div",I,[e[5]||(e[5]=t("p",{class:"text-[9px] font-black uppercase tracking-[0.15em] text-slate-400"},"Total Parceiros",-1)),t("p",K,o(l.value.length),1)]),t("div",O,[e[6]||(e[6]=t("p",{class:"text-[9px] font-black uppercase tracking-[0.15em] text-blue-600"},"Com E-mail",-1)),t("p",U,o(l.value.filter(s=>s.email).length),1)]),t("div",H,[e[7]||(e[7]=t("p",{class:"text-[9px] font-black uppercase tracking-[0.15em] text-emerald-600"},"Estados Atendidos",-1)),t("p",Q,o(new Set(l.value.map(s=>s.estado).filter(Boolean)).size),1)]),t("div",W,[e[8]||(e[8]=t("p",{class:"text-[9px] font-black uppercase tracking-[0.15em] text-amber-600"},"Novos (Mês)",-1)),t("p",X,o(l.value.slice(0,5).length),1)])]),t("div",Y,[M(n,{columns:k,rows:y.value,loading:m.value,"empty-text":"Nenhum parceiro comercial encontrado.",boxed:!1},{"cell-razao_social":i(({row:s})=>[t("div",Z,[t("span",ee,o(s.razao_social),1),t("span",te,o(s.cnpj?r(D)(s.cnpj):"—"),1)])]),"cell-cnpj":i(({row:s})=>[t("span",se,o(s.cnpj||"—"),1)]),"cell-contato":i(({row:s})=>[t("div",ae,[t("span",oe,o(s.email||"sem e-mail"),1),t("span",le,o(s.whatsapp?r(_)(s.whatsapp):s.telefone?r(_)(s.telefone):"—"),1)])]),"cell-comercial":i(({row:s})=>[t("div",re,[t("span",ne,o(s.forma_pagamento||"A COMBINAR"),1),s.data_vencimento?(c(),u("div",ie,[e[9]||(e[9]=t("i",{class:"pi pi-calendar text-[10px]"},null,-1)),t("span",ce,"Dia "+o(s.data_vencimento),1)])):x("",!0)])]),"cell-acoes":i(({row:s})=>[t("div",de,[r(d)("fornecedores.editar")?(c(),u("button",{key:0,onClick:B=>C(s.id),class:"w-7 h-7 rounded-lg bg-slate-100 text-slate-500 hover:bg-brand-primary hover:text-white transition-all flex items-center justify-center"},[...e[10]||(e[10]=[t("i",{class:"pi pi-pencil text-xs"},null,-1)])],8,pe)):x("",!0),r(d)("fornecedores.excluir")?(c(),u("button",{key:1,onClick:B=>j(s.id),class:"w-7 h-7 rounded-lg bg-red-50 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center"},[...e[11]||(e[11]=[t("i",{class:"pi pi-trash text-xs"},null,-1)])],8,ue)):x("",!0)])]),_:1},8,["rows","loading"])])])}}};export{fe as default};
//# sourceMappingURL=index-DSBiiAIn.js.map
