import{y as j,f,g as c,i as F,r as w,c as b,o as u,b as t,k as z,E as B,d as m,w as M,v as V,u as i,m as g,A as n,l as k,t as o,R as y,e as $,p as Z,a6 as C,s as v,q as G}from"./index-CH22lQIC.js";const q={class:"w-full max-w-[1200px] mx-auto space-y-4 animate-page-in"},H={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-2"},J={class:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto"},K={class:"relative w-full sm:w-64"},Q={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},W={class:"p-5 rounded-xl bg-white border border-slate-200 shadow-sm flex flex-col justify-center min-h-[100px]"},X={class:"text-2xl font-black text-slate-800"},Y={class:"p-5 rounded-xl bg-white border border-emerald-100 shadow-sm flex flex-col justify-center min-h-[100px]"},ee={class:"text-3xl font-black text-emerald-700"},te={class:"p-5 rounded-xl bg-white border border-amber-100 shadow-sm flex flex-col justify-center min-h-[100px]"},se={class:"flex items-center gap-2"},ae={class:"text-3xl font-black text-amber-700"},oe={class:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm"},le={class:"flex items-center gap-3 py-1"},re={class:"w-8 h-8 rounded-lg bg-slate-50 border border-slate-100 flex items-center justify-center font-black text-slate-400 text-[10px] uppercase"},ne={class:"flex flex-col"},ie={class:"text-sm font-bold text-slate-800 uppercase tracking-tight leading-tight"},de={class:"text-[10px] font-bold text-brand-primary tracking-wider uppercase"},ce={class:"flex flex-col"},ue={class:"text-xs font-bold text-slate-700"},pe={class:"flex flex-col"},xe={class:"text-sm font-black text-slate-800"},fe={class:"flex justify-end gap-1 px-2"},be=["onClick"],me=["onClick"],_e={__name:"index",setup(ge){const _=j(),p=f(""),x=f(!1),l=f([]),O=[{key:"fornecedor",label:"FORNECEDOR / PEDIDO",width:"35%"},{key:"data",label:"EMISSÃO",width:"15%"},{key:"total",label:"VALOR TOTAL",width:"20%"},{key:"status",label:"SITUAÇÃO",width:"20%"},{key:"acoes",label:"",width:"10%",align:"right"}],E=c(()=>l.value.filter(s=>["CONCLUIDO","FINALIZADO","ENTREGUE"].includes(String(s.status||"").toUpperCase())).length),A=c(()=>l.value.filter(s=>!["CONCLUIDO","FINALIZADO","CANCELADO"].includes(String(s.status||"").toUpperCase())).length),D=c(()=>l.value.reduce((s,e)=>s+(Number(e.valor_total)||0),0)),N=c(()=>{const s=(p.value||"").toLowerCase().trim();return s?l.value.filter(e=>{var r;return String(((r=e.fornecedor)==null?void 0:r.razao_social)||"").toLowerCase().includes(s)||String(e.status||"").toLowerCase().includes(s)||String(e.numero_pedido||"").includes(s)}):l.value});function I(s){const e=String(s||"").toUpperCase();return["CONCLUIDO","FINALIZADO"].includes(e)?"bg-emerald-50 text-emerald-600 border border-emerald-100":e==="CANCELADO"?"bg-red-50 text-red-500 border border-red-100":["EM_PRODUCAO","EM PRODUCAO","PRODUZINDO"].includes(e)?"bg-blue-50 text-blue-600 border border-blue-100":"bg-amber-50 text-amber-600 border border-amber-100"}function L(){_.push("/plano-corte/novo")}function P(s){_.push(`/plano-corte/${s}`)}async function S(){x.value=!0;try{const{data:s}=await C.get("/plano-corte");l.value=Array.isArray(s)?s:[]}catch{v.error("Erro ao carregar planos.")}finally{x.value=!1}}async function T(s){try{await C.delete(`/plano-corte/${s.id}`),l.value=l.value.filter(e=>e.id!==s.id),v.success("Plano removido com sucesso.")}catch{v.error("Erro ao excluir plano.")}}async function U(s){var r;await G.show("Excluir Plano de Corte",`Deseja excluir o Plano de ${((r=s.fornecedor)==null?void 0:r.razao_social)||"Marcenaria"}?`)&&await T(s)}return F(S),(s,e)=>{const r=w("Button"),R=w("Table");return u(),b("div",q,[t("div",H,[e[4]||(e[4]=z('<div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center"><i class="pi pi-box text-lg"></i></div><div><h1 class="text-lg font-black text-slate-800 uppercase tracking-tight">Plano de Corte</h1><p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Industrialização por fornecedor</p></div></div>',1)),t("div",J,[t("div",K,[e[2]||(e[2]=t("i",{class:"pi pi-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},null,-1)),M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),type:"text",placeholder:"Buscar fornecedor ou lote...",class:"w-full pl-9 pr-3 h-10 bg-white border border-slate-200 rounded-xl text-xs font-bold focus:ring-2 focus:ring-brand-primary/10 focus:border-brand-primary outline-none transition-all uppercase"},null,512),[[V,p.value]])]),i(g)("plano_corte.criar")?(u(),B(r,{key:0,variant:"primary",size:"md",class:"!h-10 !rounded-xl !px-4 text-xs font-black uppercase tracking-wider w-full sm:w-auto",onClick:e[1]||(e[1]=a=>L())},{default:n(()=>[...e[3]||(e[3]=[t("i",{class:"pi pi-plus mr-1.5 text-[10px]"},null,-1),k(" Novo Plano ",-1)])]),_:1})):m("",!0)])]),t("div",Q,[t("div",W,[e[5]||(e[5]=t("p",{class:"text-[10px] font-black uppercase tracking-[0.15em] text-slate-400 mb-1"},"Total Geral (Financeiro)",-1)),t("p",X,o(i(y)(D.value)),1)]),t("div",Y,[e[6]||(e[6]=t("p",{class:"text-[10px] font-black uppercase tracking-[0.15em] text-emerald-600 mb-1"},"Finalizados",-1)),t("p",ee,o(E.value),1)]),t("div",te,[e[8]||(e[8]=t("p",{class:"text-[10px] font-black uppercase tracking-[0.15em] text-amber-600 mb-1"},"Em Aberto",-1)),t("div",se,[t("p",ae,o(A.value),1),e[7]||(e[7]=t("span",{class:"flex h-2 w-2 rounded-full bg-amber-500 animate-pulse mt-2"},null,-1))])])]),t("div",oe,[$(R,{columns:O,rows:N.value,loading:x.value,boxed:!1},{"cell-fornecedor":n(({row:a})=>{var d,h;return[t("div",le,[t("div",re,o((((d=a.fornecedor)==null?void 0:d.razao_social)||"F").substring(0,2)),1),t("div",ne,[t("span",ie,o(((h=a.fornecedor)==null?void 0:h.razao_social)||"Fornecedor não Identificado"),1),t("span",de," Pedido #"+o(a.numero_pedido||a.id),1)])])]}),"cell-data":n(({row:a})=>[t("div",ce,[t("span",ue,o(a.data_venda?new Date(a.data_venda).toLocaleDateString("pt-BR"):"-"),1),e[9]||(e[9]=t("span",{class:"text-[9px] font-bold text-slate-400 uppercase"},"Emissão",-1))])]),"cell-total":n(({row:a})=>[t("div",pe,[t("span",xe,o(i(y)(a.valor_total||0)),1),e[10]||(e[10]=t("span",{class:"text-[9px] font-bold text-slate-400 uppercase italic"},"Total Plano",-1))])]),"cell-status":n(({row:a})=>[t("span",{class:Z(["px-2 py-1 rounded text-[9px] font-black uppercase inline-flex items-center gap-1.5",I(a.status)])},[e[11]||(e[11]=t("span",{class:"w-1.5 h-1.5 rounded-full bg-current"},null,-1)),k(" "+o(a.status||"—"),1)],2)]),"cell-acoes":n(({row:a})=>[t("div",fe,[i(g)("plano_corte.editar")?(u(),b("button",{key:0,onClick:d=>P(a.id),class:"w-7 h-7 rounded-lg bg-slate-100 text-slate-500 hover:bg-brand-primary hover:text-white transition-all flex items-center justify-center",title:"Editar"},[...e[12]||(e[12]=[t("i",{class:"pi pi-pencil text-[10px]"},null,-1)])],8,be)):m("",!0),i(g)("plano_corte.excluir")?(u(),b("button",{key:1,onClick:d=>U(a),class:"w-7 h-7 rounded-lg bg-red-50 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center",title:"Excluir"},[...e[13]||(e[13]=[t("i",{class:"pi pi-trash text-[10px]"},null,-1)])],8,me)):m("",!0)])]),_:1},8,["rows","loading"])])])}}};export{_e as default};
//# sourceMappingURL=index-BW_Em8yW.js.map
