{"version":3,"file":"pendente-CYe8-vc8.js","sources":["../../src/pages/pendente.vue"],"sourcesContent":["<template>\r\n  <div class=\"w-full h-full flex items-center justify-center p-6\">\r\n    <div class=\"w-full max-w-[520px] rounded-3xl border border-slate-200 bg-white shadow-sm overflow-hidden dark:border-slate-800 dark:bg-slate-950\">\r\n      \r\n      <div class=\"px-6 py-5 border-b border-slate-100 bg-slate-50/40 dark:border-slate-800 dark:bg-slate-900/20\">\r\n        <h1 class=\"text-lg font-black uppercase tracking-tight text-slate-800 dark:text-slate-100\">\r\n          Primeiro Acesso\r\n        </h1>\r\n        <p class=\"text-[11px] font-bold uppercase tracking-wider text-slate-500 mt-1\">\r\n          Defina sua senha definitiva para ativar sua conta\r\n        </p>\r\n      </div>\r\n\r\n      <div class=\"px-6 py-6 space-y-5\">\r\n        <div class=\"rounded-2xl border border-indigo-200 bg-indigo-50 px-4 py-3 dark:border-indigo-900/30 dark:bg-indigo-950/20\">\r\n          <p class=\"text-sm font-semibold text-indigo-900 dark:text-indigo-200\">\r\n            Segurança da Conta\r\n          </p>\r\n          <p class=\"text-sm text-indigo-900/80 dark:text-indigo-200/70 mt-1\">\r\n            Para sua segurança, substitua a senha provisória enviada por e-mail por uma nova senha pessoal.\r\n          </p>\r\n        </div>\r\n\r\n        <form @submit.prevent=\"handleTrocarSenha\" class=\"space-y-4\">\r\n          <Input\r\n            v-model=\"form.senhaAtual\"\r\n            label=\"Senha Provisória (a que recebeu)\"\r\n            type=\"password\"\r\n            required\r\n            :disabled=\"loading\"\r\n          />\r\n\r\n          <Input\r\n            v-model=\"form.senhaNova\"\r\n            label=\"Nova Senha\"\r\n            type=\"password\"\r\n            required\r\n            :disabled=\"loading\"\r\n          />\r\n\r\n          <Input\r\n            v-model=\"form.senhaConfirmacao\"\r\n            label=\"Confirmar Nova Senha\"\r\n            type=\"password\"\r\n            required\r\n            :disabled=\"loading\"\r\n          />\r\n\r\n          <div v-if=\"error\" class=\"text-xs font-bold text-rose-500 px-1\">\r\n            {{ error }}\r\n          </div>\r\n\r\n          <div class=\"flex items-center justify-end gap-2 pt-2\">\r\n            <Button \r\n              type=\"submit\" \r\n              label=\"Ativar Minha Conta\" \r\n              class=\"w-full h-11 rounded-2xl font-black uppercase tracking-wider\"\r\n              :loading=\"loading\" \r\n              :disabled=\"!canSubmit\"\r\n            />\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, computed } from 'vue'\r\nimport { useAuth } from '@/services/useauth' \r\nimport { useRouter } from 'vue-router'\r\n\r\ndefinePage({ \r\n  path: '/pendente', // Garante que o nome da rota seja este\r\n  meta: { \r\n    public: false, // O usuário PRECISA estar logado (ter o token) para alterar a senha\r\n    layout: 'auth' \r\n  } \r\n})\r\n\r\nconst { alterarSenha, syncMe, loading } = useAuth()\r\nconst router = useRouter()\r\nconst error = ref('')\r\n\r\nconst form = reactive({\r\n  senhaAtual: '',\r\n  senhaNova: '',\r\n  senhaConfirmacao: ''\r\n})\r\n\r\nconst canSubmit = computed(() => {\r\n  return form.senhaAtual.length >= 3 && \r\n         form.senhaNova.length >= 6 && \r\n         form.senhaNova === form.senhaConfirmacao\r\n})\r\n\r\nasync function handleTrocarSenha() {\r\n  error.value = ''\r\n  \r\n  if (form.senhaNova !== form.senhaConfirmacao) {\r\n    error.value = 'As senhas não conferem.'\r\n    return\r\n  }\r\n\r\n  try {\r\n    // 1. Chama o backend para trocar a senha e mudar status para ATIVO\r\n    await alterarSenha({\r\n      senha_atual: form.senhaAtual,\r\n      senha_nova: form.senhaNova\r\n    })\r\n\r\n    // 2. Sincroniza o estado do usuário (para o router saber que ele é ATIVO agora)\r\n    await syncMe()\r\n\r\n    // 3. Manda para a home\r\n    router.push('/')\r\n  } catch (e) {\r\n    error.value = e.response?.data?.message || 'Erro ao alterar senha. Verifique a senha atual.'\r\n  }\r\n}\r\n</script>"],"names":["alterarSenha","syncMe","loading","useAuth","router","useRouter","error","ref","form","reactive","canSubmit","computed","handleTrocarSenha","e","_b","_a","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_Input","_cache","$event","_unref","_hoisted_4","_toDisplayString","_hoisted_5","_component_Button"],"mappings":"qiBAgFA,KAAM,CAAE,aAAAA,EAAc,OAAAC,EAAQ,QAAAC,CAAO,EAAKC,EAAO,EAC3CC,EAASC,EAAS,EAClBC,EAAQC,EAAI,EAAE,EAEdC,EAAOC,EAAS,CACpB,WAAY,GACZ,UAAW,GACX,iBAAkB,EACpB,CAAC,EAEKC,EAAYC,EAAS,IAClBH,EAAK,WAAW,QAAU,GAC1BA,EAAK,UAAU,QAAU,GACzBA,EAAK,YAAcA,EAAK,gBAChC,EAED,eAAeI,GAAoB,SAGjC,GAFAN,EAAM,MAAQ,GAEVE,EAAK,YAAcA,EAAK,iBAAkB,CAC5CF,EAAM,MAAQ,0BACd,MACF,CAEA,GAAI,CAEF,MAAMN,EAAa,CACjB,YAAaQ,EAAK,WAClB,WAAYA,EAAK,SACvB,CAAK,EAGD,MAAMP,EAAM,EAGZG,EAAO,KAAK,GAAG,CACjB,OAASS,EAAG,CACVP,EAAM,QAAQQ,GAAAC,EAAAF,EAAE,WAAF,YAAAE,EAAY,OAAZ,YAAAD,EAAkB,UAAW,iDAC7C,CACF,gDAtHE,OAAAE,EAAA,EAAAC,EA+DM,MA/DNC,EA+DM,CA9DJC,EA6DM,MA7DNC,EA6DM,aA3DJD,EAOM,MAAA,CAPD,MAAM,iGAA+F,CACxGA,EAEK,KAAA,CAFD,MAAM,gFAAgF,EAAC,mBAE3F,EACAA,EAEI,IAAA,CAFD,MAAM,oEAAoE,EAAC,qDAE9E,QAGFA,EAiDM,MAjDNE,EAiDM,aAhDJF,EAOM,MAAA,CAPD,MAAM,+GAA6G,CACtHA,EAEI,IAAA,CAFD,MAAM,4DAA4D,EAAC,sBAEtE,EACAA,EAEI,IAAA,CAFD,MAAM,yDAAyD,EAAC,mGAEnE,QAGFA,EAsCO,OAAA,CAtCA,WAAgBP,EAAiB,CAAA,SAAA,CAAA,EAAE,MAAM,cAC9CU,EAMEC,EAAA,CALS,WAAAf,EAAK,WAAL,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAjB,EAAK,WAAUiB,GACxB,MAAM,mCACN,KAAK,WACL,SAAA,GACC,SAAUC,EAAAxB,CAAA,qCAGboB,EAMEC,EAAA,CALS,WAAAf,EAAK,UAAL,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAjB,EAAK,UAASiB,GACvB,MAAM,aACN,KAAK,WACL,SAAA,GACC,SAAUC,EAAAxB,CAAA,qCAGboB,EAMEC,EAAA,CALS,WAAAf,EAAK,iBAAL,sBAAAgB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAjB,EAAK,iBAAgBiB,GAC9B,MAAM,uBACN,KAAK,WACL,SAAA,GACC,SAAUC,EAAAxB,CAAA,qCAGFI,EAAA,WAAXW,EAEM,MAFNU,EAEMC,EADDtB,EAAA,KAAK,EAAA,CAAA,YAGVa,EAQM,MARNU,EAQM,CAPJP,EAMEQ,EAAA,CALA,KAAK,SACL,MAAM,qBACN,MAAM,8DACL,QAASJ,EAAAxB,CAAA,EACT,UAAWQ,EAAA"}