import{f as i,g as _,h as q,i as G,j as K,r as Q,c as s,o as r,b as t,k as p,l as u,d as m,e as H,F as j,u as O,m as x,t as A,n as J,w as W,v as X,p as Y,C as Z,q as N,s as E,O as S}from"./index-CH22lQIC.js";const $={class:"w-full max-w-[1200px] mx-auto space-y-6 animate-page-in pb-10"},ee={class:"p-8 border-b border-slate-100 bg-slate-50/30"},te={class:"max-w-2xl relative"},ae={key:0,class:"absolute -bottom-6 left-1 flex items-center gap-2 text-[9px] font-black text-brand-primary italic"},se={class:"p-10 min-h-[450px] relative"},re={key:0,class:"flex flex-col items-center justify-center py-20 text-center animate-in fade-in zoom-in duration-500"},le={key:1,class:"flex flex-col items-center justify-center py-24 text-center"},ie={key:0,class:"max-w-xl mx-auto py-16 text-center border-2 border-dashed border-slate-100 rounded-[3rem] p-10 bg-slate-50/50"},oe={key:0,class:"pi pi-spin pi-spinner"},ne={key:1,class:"pi pi-rocket"},de={key:1,class:"space-y-10 animate-in slide-in-from-bottom-5 duration-700"},ce={class:"flex flex-col md:flex-row items-center justify-between p-6 bg-slate-900 rounded-[2rem] text-white shadow-2xl shadow-slate-200"},pe={class:"flex items-center gap-5 mb-4 md:mb-0"},ue={class:"text-sm font-black uppercase tracking-wide mt-0.5"},me={class:"text-center md:text-right border-t md:border-t-0 md:border-l border-white/10 pt-4 md:pt-0 md:pl-8 flex flex-col items-center md:items-end"},xe={class:"inline-flex items-center gap-2.5 mt-1.5 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20"},be={class:"text-[11px] font-black uppercase text-emerald-400 tracking-[0.15em]"},fe={class:"relative"},ve={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 relative z-10"},ge={class:"block text-[9px] font-black uppercase tracking-widest text-slate-400 mb-3 group-hover:text-slate-600 transition-colors"},we={class:"w-full relative"},he=["onUpdate:modelValue"],ye={key:0,class:"p-8 border-t border-slate-100 bg-slate-50/50 flex flex-col sm:flex-row items-center justify-between gap-6"},ke=["disabled"],_e={key:0,class:"pi pi-spin pi-spinner"},Ae={key:1,class:"pi pi-save"},Ce={__name:"index",setup(Ne){const C={data_medida:"Data da Medida",data_orcamento:"Data do Orçamento",data_medida_fina:"Data da Medida Fina",data_producao:"Data da Produção",data_montagem:"Data da Montagem"},b=i(!1),f=i(!1),d=i(!1),v=i(!1),g=i([]),l=i(null),o=i([]),n=_(()=>{var a;return(a=o.value)!=null&&a.length?o.value[0]:null}),I=_(()=>{const a=Number(l.value),e=g.value.find(h=>Number(h.value)===a);return(e==null?void 0:e.label)||"Desconhecido"}),F=_(()=>g.value||[]),c=q({data_medida:"",data_orcamento:"",data_medida_fina:"",data_producao:"",data_montagem:""});function V(a){return a?a.split("T")[0]:""}async function M(){b.value=!0;try{const a=await Z.select();g.value=Array.isArray(a==null?void 0:a.data)?a.data:[]}finally{b.value=!1}}async function w(a){f.value=!0;try{const e=await S.listarPorCliente(a);o.value=(e==null?void 0:e.data)||[],D()}finally{f.value=!1}}function D(){const a=n.value;Object.keys(C).forEach(e=>{c[e]=a?V(a[e]):""})}async function P(){const a=Number(l.value);if(a){if(!x("agendamentos.criar"))return E.error("Acesso negado.");v.value=!0;try{await S.criar({cliente_id:a,status_processo:"MEDIDA_PENDENTE"}),await w(a)}finally{v.value=!1}}}async function z(){if(!x("agendamentos.editar"))return E.error("Acesso negado.");const a=n.value;if(a!=null&&a.id){d.value=!0;try{await S.salvar(a.id,{...c}),await w(Number(l.value))}finally{d.value=!1}}}async function L(){await N.show("LIMPAR FILTRO","Isso vai remover o cliente selecionado e limpar os dados exibidos na tela.")&&U()}async function R(){!Number(l.value)||!await N.show("INICIAR OBRA","Deseja iniciar o fluxo de obra para este cliente agora?")||await P()}async function T(){await N.show("SALVAR AGENDAMENTOS","Deseja salvar as datas informadas para este cliente?")&&await z()}function U(){l.value=null,o.value=[]}return G(M),K(l,async a=>{const e=Number(a);e?await w(e):(o.value=[],D())}),(a,e)=>{const h=Q("SearchInput");return r(),s("div",$,[t("header",{class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 p-2"},[e[2]||(e[2]=p('<div class="flex items-center gap-4"><div class="w-12 h-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center shadow-xl shadow-slate-200 rotate-2 hover:rotate-0 transition-all duration-300"><i class="pi pi-calendar-clock text-xl"></i></div><div><h1 class="text-2xl font-black text-slate-800 uppercase tracking-tight leading-none">Fluxo de Agendamentos</h1><p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mt-1.5">Cronograma de datas críticas e produção</p></div></div>',1)),t("button",{onClick:L,class:"group flex items-center gap-2 h-11 px-5 rounded-xl border border-slate-200 bg-white text-slate-500 text-[10px] font-black uppercase tracking-widest hover:bg-rose-50 hover:text-rose-500 hover:border-rose-100 transition-all active:scale-95"},[...e[1]||(e[1]=[t("i",{class:"pi pi-filter-slash text-[8px] group-hover:rotate-12 transition-transform"},null,-1),u(" Limpar Filtro ",-1)])])]),t("div",{class:Y(["bg-white border border-slate-200 rounded-[2rem] shadow-sm overflow-hidden transition-all duration-500",{"shadow-xl shadow-brand-primary/5 border-brand-primary/20":l.value}])},[t("div",ee,[t("div",te,[e[4]||(e[4]=p('<div class="flex items-center gap-3 mb-4 ml-1"><span class="flex h-2 w-2 relative"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-primary opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-brand-primary"></span></span><label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]"> Selecione o Cliente para o Fluxo </label></div>',1)),H(h,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=y=>l.value=y),mode:"select",placeholder:"PESQUISAR CLIENTE OU NOME DA EMPRESA...",options:F.value,labelKey:"label",valueKey:"value",class:"w-full transform transition-transform focus-within:scale-[1.01]"},null,8,["modelValue","options"]),b.value?(r(),s("div",ae,[...e[3]||(e[3]=[t("i",{class:"pi pi-spin pi-spinner text-[8px]"},null,-1),u(" Sincronizando base de dados... ",-1)])])):m("",!0)])]),t("div",se,[l.value?f.value?(r(),s("div",le,[...e[6]||(e[6]=[t("div",{class:"w-12 h-12 border-4 border-slate-100 border-t-brand-primary rounded-full animate-spin mb-6"},null,-1),t("p",{class:"text-[11px] font-black uppercase tracking-[0.3em] text-slate-500 animate-pulse"},"Cruzando dados da obra...",-1)])])):(r(),s(j,{key:2},[n.value?(r(),s("div",de,[t("div",ce,[t("div",pe,[e[12]||(e[12]=t("div",{class:"w-14 h-14 rounded-2xl bg-white/10 flex items-center justify-center border border-white/10 backdrop-blur-md"},[t("i",{class:"pi pi-briefcase text-xl text-brand-primary"})],-1)),t("div",null,[e[11]||(e[11]=t("span",{class:"text-[9px] font-black uppercase tracking-[0.3em] text-slate-500"},"Fluxo de Produção",-1)),t("h3",ue,A(I.value),1)])]),t("div",me,[e[14]||(e[14]=t("span",{class:"text-[9px] font-black uppercase tracking-[0.3em] text-slate-500"},"Status do Processo",-1)),t("div",xe,[e[13]||(e[13]=t("span",{class:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse shadow-[0_0_8px_rgba(52,211,153,0.8)]"},null,-1)),t("span",be,A(n.value.status_processo),1)])])]),t("div",fe,[e[16]||(e[16]=t("div",{class:"hidden lg:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-100 -translate-y-1/2 z-0"},null,-1)),t("div",ve,[(r(),s(j,null,J(C,(y,k)=>t("div",{key:k,class:"p-6 rounded-3xl border border-slate-100 bg-white hover:border-brand-primary/30 hover:shadow-xl hover:shadow-slate-100/50 transition-all group flex flex-col items-center text-center"},[e[15]||(e[15]=t("div",{class:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center mb-4 group-hover:bg-brand-primary group-hover:text-white transition-all duration-300"},[t("i",{class:"pi pi-calendar text-xs"})],-1)),t("label",ge,A(y),1),t("div",we,[W(t("input",{type:"date","onUpdate:modelValue":B=>c[k]=B,class:"w-full bg-slate-50 border border-slate-100 rounded-xl px-3 py-3 text-[11px] font-black text-slate-800 focus:bg-white focus:ring-4 focus:ring-brand-primary/5 focus:border-brand-primary outline-none transition-all uppercase appearance-none"},null,8,he),[[X,c[k]]])])])),64))])]),e[17]||(e[17]=p('<div class="bg-slate-50 border border-slate-100 p-5 rounded-2xl flex items-center gap-4"><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm"><i class="pi pi-info-circle text-brand-primary text-sm"></i></div><p class="text-[10px] font-bold text-slate-500 uppercase tracking-tight leading-relaxed"><strong class="text-slate-700">Inteligência de Processo:</strong> As etapas são alteradas automaticamente. Sempre clique em <span class="text-brand-primary">Salvar</span> para registrar as mudanças. </p></div>',1))])):(r(),s("div",ie,[e[8]||(e[8]=t("div",{class:"w-20 h-20 rounded-3xl bg-amber-50 text-amber-500 flex items-center justify-center mx-auto mb-6 shadow-inner"},[t("i",{class:"pi pi-calendar-plus text-3xl"})],-1)),e[9]||(e[9]=t("h3",{class:"text-sm font-black uppercase text-slate-800 tracking-widest"},"Nenhum Cronograma Ativo",-1)),e[10]||(e[10]=t("p",{class:"text-[10px] font-bold text-slate-400 uppercase mt-3 mb-8 leading-relaxed px-10"}," Este cliente ainda não possui um fluxo de produção iniciado no sistema. ",-1)),O(x)("agendamentos.criar")?(r(),s("button",{key:0,onClick:R,class:"h-14 px-10 rounded-2xl bg-brand-primary text-white text-[11px] font-black uppercase tracking-widest shadow-xl shadow-brand-primary/30 hover:-translate-y-1 transition-all active:scale-95 flex items-center gap-3 mx-auto"},[v.value?(r(),s("i",oe)):(r(),s("i",ne)),e[7]||(e[7]=u(" Configurar Fluxo de Obra ",-1))])):m("",!0)]))],64)):(r(),s("div",re,[...e[5]||(e[5]=[t("div",{class:"w-24 h-24 rounded-[2rem] bg-slate-50 border-2 border-dashed border-slate-200 flex items-center justify-center mb-6 group-hover:rotate-6 transition-transform"},[t("i",{class:"pi pi-users text-4xl text-slate-200"})],-1),t("h4",{class:"text-sm font-black text-slate-800 uppercase tracking-widest"},"Aguardando Seleção",-1),t("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-tight mt-2 max-w-[280px] leading-relaxed"}," Localize um parceiro comercial acima para gerenciar as datas do projeto. ",-1)])]))]),n.value?(r(),s("footer",ye,[e[19]||(e[19]=p('<div class="text-center sm:text-left"><span class="text-[9px] font-black uppercase text-slate-400 tracking-widest block mb-1">Status da Sincronização</span><div class="flex items-center gap-2"><i class="pi pi-check-circle text-emerald-500 text-xs"></i><span class="text-[10px] font-black text-slate-600 uppercase tracking-tighter">Dados Prontos para Gravação</span></div></div>',1)),O(x)("agendamentos.editar")?(r(),s("button",{key:0,onClick:T,class:"w-full sm:w-auto h-14 px-12 rounded-2xl bg-brand-primary text-white text-[11px] font-black uppercase tracking-[0.2em] shadow-2xl shadow-brand-primary/30 hover:brightness-110 active:scale-95 transition-all flex items-center justify-center gap-3",disabled:d.value},[d.value?(r(),s("i",_e)):(r(),s("i",Ae)),e[18]||(e[18]=u(" Finalizar Agendamentos ",-1))],8,ke)):m("",!0)])):m("",!0)],2)])}}};export{Ce as default};
//# sourceMappingURL=index-CO5mWCmu.js.map
